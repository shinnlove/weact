define('lib/global',['lib/jquery'],function(require,exports,module){require('lib/jquery');window.jq=jQuery.noConflict();jQuery.extend(jQuery.ajax,{_requestCache:{}});jQuery.extend({utilExt:{charset:'utf-8',setcookie:function(cookieName,cookieValue,seconds,path,domain,secure){var expires=new Date();expires.setTime(expires.getTime()+seconds);document.cookie=escape(cookieName)+'='+escape(cookieValue)+(expires?'; expires='+expires.toGMTString():'')+(path?'; path='+path:'/')+(domain?'; domain='+domain:'')+(secure?'; secure':'')},getcookie:function(name){var cookies=document.cookie.split('; ');var len=cookies.length;for(var i=0;i<len;i++){var cookie=cookies[i].split('=');if(cookie[0]==name){return unescape(cookie[1])}}return''},in_array:function(needle,haystack){if(typeof needle=='string'||typeof needle=='number'){for(var i in haystack){if(haystack[i]==needle){return true}}}return false},parseStr:function(str,key){var params=str.split('&');var query={};var q=[];var name='';for(i=0;i<params.length;i++){q=params[i].split('=');name=decodeURIComponent(q[0]);if(!name){continue}if(name.substr(-2)=='[]'){if(!query[name]){query[name]=[]}query[name].push(q[1])}else{query[name]=q[1]}}if(key){if(query[key]){return query[key]}else{return null}}else{return query}},getQuery:function(key){var search=window.location.search;if(search.indexOf('?')!=-1){var str=search.substr(1);return jQuery.utilExt.parseStr(str,key)}},isObjectEmpty:function(obj){for(i in obj){return false}return true},strlen:function(str){return(/msie/.test(navigator.userAgent.toLowerCase())&&str.indexOf('\n')!==-1)?str.replace(/\r?\n/g,'_').length:str.length},mb_strlen:function(str){var len=0;for(var i=0;i<str.length;i++){len+=str.charCodeAt(i)<0||str.charCodeAt(i)>255?(jQuery.utilExt.charset.toLowerCase()==='utf-8'?3:2):1}return len},mb_cutstr:function(str,maxlen,dot){var len=0;var ret='';var dot=!dot&&dot!==''?'...':dot;maxlen=maxlen-dot.length;for(var i=0;i<str.length;i++){len+=str.charCodeAt(i)<0||str.charCodeAt(i)>255?(jQuery.utilExt.charset.toLowerCase()==='utf-8'?3:2):1;if(len>maxlen){ret+=dot;break}ret+=str.substr(i,1)}return ret},strLenCalc:function(obj,showId,maxlen){var v=obj.value,maxlen=!maxlen?200:maxlen,curlen=maxlen,len=jQuery.utilExt.strlen(v);for(var i=0;i<v.length;i++){if(v.charCodeAt(i)<0||v.charCodeAt(i)>127){curlen-=2}else{curlen-=1}}return Math.floor(curlen/2)},htmlEncode:function(text){return text.replace(/&/g,'&amp').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;')},htmlDecode:function(text){return text.replace(/&amp;/g,'&').replace(/&quot;/g,'/"').replace(/&lt;/g,'<').replace(/&gt;/g,'>')},dialog:function(opts){setTimeout(function(){jQuery.utilExt._dialog(opts)},5)},_dialog:function(opts){var opts=opts||{};var dId=opts.id||'tips';var dialogId='fwin_dialog_'+dId;var maskId='fwin_mask_'+dId;if(!opts.content){document.ontouchmove=function(e){return true};jQuery('#'+dialogId).remove();jQuery('#'+maskId).remove();return false}var title=opts.title||'提示信息';var content=opts.content||'';var btnOk=opts.okValue||false;var btnCancel=opts.cancelValue||false;var isShowMask=opts.isMask||false;var existDialogCount=jq('div[id^="fwin_dialog_"]').length||0;var maskZIndex=10000+existDialogCount*10;var dialogZIndex=maskZIndex+1;var maskStyle='position:absolute;top:-0px;left:-0px;width:'+jQuery(document).width()+'px;height:'+jQuery(document).height()+'px;background:#000;filter:alpha(opacity=60);opacity:0.5; z-index:'+maskZIndex+';';var isHtml=opts.isHtml||false;var autoClose=opts.autoClose||false;var isConfirm=opts.isConfirm||false;var iconClass='';switch(opts.icon){case'success':iconClass='icon_success';break;case'none':iconClass='';break;case'error':iconClass='';break;default:iconClass='g-layer-tips';break}if(isShowMask){var dialogMaskHtmlArr=[];dialogMaskHtmlArr.push('<div id='+maskId+' class="g-mask" style="'+maskStyle+'"></div>');var dialogMaskHtml=dialogMaskHtmlArr.join('');jQuery(dialogMaskHtml).appendTo('body');document.ontouchmove=function(e){e.preventDefault()}}var dialogHtmlArr=[];if(isHtml){dialogHtmlArr.push('<div style="width:100%;position:fixed;z-index:'+dialogZIndex+';" id="'+dialogId+'">'+content+'</div>')}else{if(!opts.title&&!btnOk&&!btnCancel){dialogHtmlArr.push('<div style="position:fixed;z-index:'+dialogZIndex+';" id="'+dialogId+'"><div class="tips br5">');if(dId=='loading'){dialogHtmlArr.push('<div class="loadicon tipL" style="vertical-align: -5px;"><span class="blockG" id="rotateG_01"></span><span class="blockG" id="rotateG_02"></span><span class="blockG" id="rotateG_03"></span><span class="blockG" id="rotateG_04"></span><span class="blockG" id="rotateG_05"></span><span class="blockG" id="rotateG_06"></span><span class="blockG" id="rotateG_07"></span><span class="blockG" id="rotateG_08"></span></div> ')}dialogHtmlArr.push(content+'</div></div>')}else if(isConfirm){if(confirm(content)){if(typeof opts.ok=='function'){opts.ok()}}else{if(typeof opts.cancel=='function'){opts.cancel()}}return true}else{dialogHtmlArr.push('<div style="min-width:350px;position:fixed;z-index:'+dialogZIndex+';" id="'+dialogId+'"><span class="close"></span>');dialogHtmlArr.push('<div class="popLayer pSpace" style="width:80%">');dialogHtmlArr.push('<p class="editTCon">'+content+'</p>');dialogHtmlArr.push('<div class="editArea">');dialogHtmlArr.push(btnOk?'<a href="javascript:;" class="editBtn1 db" title="">'+btnOk+'</a>':'');dialogHtmlArr.push(btnCancel?'<a href="javascript:;" class="editBtn2 db" title="">'+btnCancel+'</a>':'');dialogHtmlArr.push('</div></div>')}}var dialogHtml=dialogHtmlArr.join('');if(jQuery('#'+dialogId)[0]){jQuery('#'+dialogId).remove();jQuery('#'+maskId).remove()}jQuery(dialogHtml).appendTo('body');var clientWidth=jQuery(window).width();var clientHeight=jQuery(window).height();var dialogLeft=(clientWidth-jQuery('#'+dialogId).outerWidth())/2;var dialogTop=(clientHeight-jQuery('#'+dialogId).height())*0.382;dialogLeft=opts.left||dialogLeft;dialogTop=typeof opts.top==='undefined'?dialogTop:opts.top;jQuery("#"+dialogId).css({"top":dialogTop+"px","left":dialogLeft+"px"});jQuery('#'+dialogId+' .close').click(function(){if(isShowMask){document.ontouchmove=function(e){return true}}var closeCBResult=true;if(typeof opts.close=='function'){closeCBResult=opts.close()}if(closeCBResult){jQuery('#'+maskId).hide();jQuery('#'+maskId).remove();jQuery('#'+dialogId).hide();jQuery('#'+dialogId).remove()}});if(typeof opts.callback=='function'){if(isShowMask){document.ontouchmove=function(e){e.preventDefault()}}opts.callback()}if(typeof opts.ok=='function'){jQuery('#'+dialogId+' .editBtn1').click(function(){opts.ok()})}if(typeof opts.cancel=='function'){jQuery('#'+dialogId+' .editBtn2').click(function(){opts.cancel()})}if(jQuery('#'+dialogId+' .editBtn1')[0]){jQuery('#'+dialogId+' .editBtn1').click(function(){jQuery('#'+dialogId+' .close').click()})}if(jQuery('#'+dialogId+' .editBtn2')[0]){jQuery('#'+dialogId+' .editBtn2').click(function(){jQuery('#'+dialogId+' .close').click()})}if(!opts.title&&!btnOk&&!btnCancel&&autoClose){autoClose=autoClose>1?autoClose:1000;setTimeout(function(){jQuery('#'+dialogId).fadeOut('slow',function(){jQuery('#'+maskId).hide();jQuery('#'+maskId).remove();jQuery('#'+dialogId).hide();jQuery('#'+dialogId).remove();if(typeof opts.close=='function'){opts.close()}})},autoClose)}},showLoading:function(display,waiting,autoClose){var display=display||'block';var autoClose=autoClose||false;waiting=waiting||'正在加载...';if(display=='block'){jQuery.utilExt.dialog({id:'loading',content:waiting,isMask:false,autoClose:autoClose})}else{jQuery.utilExt.dialog({id:'loading'})}},ajax:function(url,data,opts){var opts=opts||{};var loadingTimer='';url=url.indexOf('?')===-1?url+'?':url+'&';url=url.replace(/\&resType\=[^\&]+/g,'')+'resType=json';url=url.replace(/\&isAjax\=1/g,'')+'&isAjax=1';var ajaxOpts={url:url,data:data,cache:opts.cache||false,processData:opts.isUpload,contentType:opts.isUpload?false:'application/x-www-form-urlencoded',type:data?'POST':'GET',dataType:opts.dataType||'json',timeout:opts.timeout||30000,jsonp:opts.dataType==='jsonp'?'callback':null,jsonpCallback:opts.dataType==='jsonp'?opts.success:null,beforeSend:function(XHR,option){if(opts.requestIndex){if(opts.requestMode=='block'){if(jQuery.ajax._requestCache[opts.requestIndex]){return false}}else if(opts.requestMode=='abort'){if(jQuery.ajax._requestCache[opts.requestIndex]){jQuery.ajax._requestCache[opts.requestIndex].abort()}}}var result=true;if(typeof opts.beforeSend=='function'){result=opts.beforeSend(XHR,option)}if(result){jQuery.ajax._requestCache[opts.requestIndex]=XHR;if(!opts.noShowLoading){loadingTimer=setTimeout(function(){jQuery.utilExt.showLoading()},100)}}return result},success:function(result,jqStatus,curXHR){clearTimeout(loadingTimer);jQuery.utilExt.showLoading('none');if(result==null&&!opts.noMsg){jQuery.utilExt.dialog({content:'您的网络有些问题，请稍后再试 [code:1]',autoClose:true})}if(typeof result!=='object'){result=jQuery.parseJSON(result)}if(typeof opts.success=='function'){opts.success(result,jqStatus,opts)}if(result.errCode==0){if(!opts.noMsg){jQuery.utilExt.dialog({content:result.message,icon:'success',autoClose:true})}if(!opts.noJump&&result.jumpURL){var locationTime=result.locationTime||2000;jQuery.utilExt.reload(result.jumpURL,locationTime)}}else if(result.errCode){if(!opts.noMsg){var msg=result.message+'<span style="display:none;">'+result.errCode+'</span>';jQuery.utilExt.dialog({content:msg,autoClose:true})}}else{if(!opts.noMsg){jQuery.utilExt.dialog({content:'数据解析失败，请稍后再试 [code:2]',autoClose:true})}}},error:function(XHR,jqStatus,errorThrown){clearTimeout(loadingTimer);jQuery.utilExt.showLoading('none');if(XHR.readyState==0||XHR.status==0){if(!opts.noMsg){var msg='您的网络有些问题，请稍后再试[code:4]';jQuery.utilExt.dialog({content:msg,autoClose:true})}}else if(jqStatus!='abort'&&!opts.noMsg){if(!opts.noMsg){var msg='';switch(jqStatus){case'timeout':msg='对不起，请求服务器网络超时';break;case'error':msg='网络出现异常，请求服务器错误';break;case'parsererror':msg='网络出现异常，服务器返回错误';break;case'notmodified':default:msg='您的网络有些问题，请稍后再试[code:3]'}jQuery.utilExt.dialog({content:msg,autoClose:true})}}if(typeof opts.error=='function'){opts.error()}},complete:function(XHR,status){if(jQuery.ajax._requestCache[opts.requestIndex]){jQuery.ajax._requestCache[opts.requestIndex]=null}if(typeof opts.complete=='function'){opts.complete(XHR,status)}}};jQuery.ajax(ajaxOpts);return false}}});jQuery.extend({os:{ios:false,android:false,version:false}});(function(){var ua=navigator.userAgent;var browser={},weixin=ua.match(/MicroMessenger\/([^\s]+)/),webkit=ua.match(/WebKit\/([\d.]+)/),android=ua.match(/(Android)\s+([\d.]+)/),ipad=ua.match(/(iPad).*OS\s([\d_]+)/),ipod=ua.match(/(iPod).*OS\s([\d_]+)/),iphone=!ipod&&!ipad&&ua.match(/(iPhone\sOS)\s([\d_]+)/),webos=ua.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),touchpad=webos&&ua.match(/TouchPad/),kindle=ua.match(/Kindle\/([\d.]+)/),silk=ua.match(/Silk\/([\d._]+)/),blackberry=ua.match(/(BlackBerry).*Version\/([\d.]+)/),mqqbrowser=ua.match(/MQQBrowser\/([\d.]+)/),chrome=ua.match(/CriOS\/([\d.]+)/),opera=ua.match(/Opera\/([\d.]+)/),safari=ua.match(/Safari\/([\d.]+)/);if(weixin){jQuery.os.wx=true;jQuery.os.wxVersion=weixin[1]}if(android){jQuery.os.android=true;jQuery.os.version=android[2]}if(iphone){jQuery.os.ios=jQuery.os.iphone=true;jQuery.os.version=iphone[2].replace(/_/g,'.')}if(ipad){jQuery.os.ios=jQuery.os.ipad=true;jQuery.os.version=ipad[2].replace(/_/g,'.')}if(ipod){jQuery.os.ios=jQuery.os.ipod=true;jQuery.os.version=ipod[2].replace(/_/g,'.')}window.NETTYPE=0;window.NETTYPE_FAIL=-1;window.NETTYPE_WIFI=1;window.NETTYPE_EDGE=2;window.NETTYPE_3G=3;window.NETTYPE_DEFAULT=0})()});