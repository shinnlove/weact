// JavaScript Document
define(function(t) {
	var e = t("zepto"),
		n = t("onlineapp"),
		i = {
			_video: e(".j-video"),
			_videoArr: [],
			video_init: function() {
				var t = this;
				this._video.each(function() {
					var i, a = e(this).attr("data-video-src"),
						o = e(this).attr("data-video-type"),
						r = e(this).find(".img"),
						s = e(this).find(".video");
					"bendi" == o ? i = t.bendi_video(a) : "qq" == o ? i = t.qq_video(a) : "youku" == o && (i = t.youku_video(a)), e(this).find(".videoWrap").append(e(i)), t._videoArr.push(i), r.on("click", function() {
						e(this).hide(), "IFRAME" == i.nodeName && e(i).data("src") && (i.src = e(i).data("src")), s.removeClass("f-hide"), setTimeout(function() {
							s.addClass("z-show"), setTimeout(function() {
								"function" == typeof i.play && i.play()
							}, 500)
						}, 20), n._handleEvent("video_open", i)
					}), s.on("click", function(t) {
						var a = t.target;
						e(a).hasClass("videoWrap") || e(a).parents(".videoWrap").length >= 1 || (s.removeClass("z-show"), r.show(), "function" == typeof i.pause && i.pause(), "IFRAME" == i.nodeName && (e(i).data("src", i.src), i.src = ""), setTimeout(function() {
							s.addClass("f-hide"), n._handleEvent("video_close", i)
						}, 500))
					})
				})
			},
			bendi_video: function(t) {
				var n = {
					controls: "controls",
					preload: "none",
					src: t
				},
					i = e("<video></video>")[0];
				for (var a in n) n.hasOwnProperty(a) && a in i && (i[a] = n[a]);
				return i
			},
			qq_video: function(t) {
				return e('<iframe src="' + t + '" frameborder=0 allowfullscreen></iframe>')[0]
			},
			youku_video: function(t) {
				return e('<iframe src="' + t + '" frameborder=0 allowfullscreen></iframe>')[0]
			}
		};
	return i
});