// JavaScript Document
define("touch", function(t, e, n) {
	var i = t("zepto");
	n.exports = i, function(t) {
		function e(t, e, n, i) {
			return Math.abs(t - e) >= Math.abs(n - i) ? t - e > 0 ? "Left" : "Right" : n - i > 0 ? "Up" : "Down"
		}
		function n() {
			u = null, d.last && (d.el.trigger("longTap"), d = {})
		}
		function i() {
			u && clearTimeout(u), u = null
		}
		function a() {
			s && clearTimeout(s), l && clearTimeout(l), c && clearTimeout(c), u && clearTimeout(u), s = l = c = u = null, d = {}
		}
		function o(t) {
			return ("touch" == t.pointerType || t.pointerType == t.MSPOINTER_TYPE_TOUCH) && t.isPrimary
		}
		function r(t, e) {
			return t.type == "pointer" + e || t.type.toLowerCase() == "mspointer" + e
		}
		var s, l, c, u, h, d = {},
			f = 750;
		t(document).ready(function() {
			var p, g, m, v, y = 0,
				x = 0;
			"MSGesture" in window && (h = new MSGesture, h.target = document.body), t(document).bind("MSGestureEnd", function(t) {
				var e = t.velocityX > 1 ? "Right" : -1 > t.velocityX ? "Left" : t.velocityY > 1 ? "Down" : -1 > t.velocityY ? "Up" : null;
				e && (d.el.trigger("swipe"), d.el.trigger("swipe" + e))
			}).on("touchstart MSPointerDown pointerdown", function(e) {
				(!(v = r(e, "down")) || o(e)) && (m = v ? e : e.touches[0], e.touches && 1 === e.touches.length && d.x2 && (d.x2 = void 0, d.y2 = void 0), p = Date.now(), g = p - (d.last || p), d.el = t("tagName" in m.target ? m.target : m.target.parentNode), s && clearTimeout(s), d.x1 = m.pageX, d.y1 = m.pageY, g > 0 && 250 >= g && (d.isDoubleTap = !0), d.last = p, u = setTimeout(n, f), h && v && h.addPointer(e.pointerId))
			}).on("touchmove MSPointerMove pointermove", function(t) {
				(!(v = r(t, "move")) || o(t)) && (m = v ? t : t.touches[0], i(), d.x2 = m.pageX, d.y2 = m.pageY, y += Math.abs(d.x1 - d.x2), x += Math.abs(d.y1 - d.y2))
			}).on("touchend MSPointerUp pointerup", function(n) {
				(!(v = r(n, "up")) || o(n)) && (i(), d.x2 && Math.abs(d.x1 - d.x2) > 30 || d.y2 && Math.abs(d.y1 - d.y2) > 30 ? c = setTimeout(function() {
					d.el.trigger("swipe"), d.el.trigger("swipe" + e(d.x1, d.x2, d.y1, d.y2)), d = {}
				}, 0) : "last" in d && (30 > y && 30 > x ? l = setTimeout(function() {
					var e = t.Event("tap");
					e.cancelTouch = a, d.el.trigger(e), d.isDoubleTap ? (d.el && d.el.trigger("doubleTap"), d = {}) : s = setTimeout(function() {
						s = null, d.el && d.el.trigger("singleTap"), d = {}
					}, 250)
				}, 0) : d = {}), y = x = 0)
			}).on("touchcancel MSPointerCancel pointercancel", a), t(window).on("scroll", a)
		}), ["swipe", "swipeLeft", "swipeRight", "swipeUp", "swipeDown", "doubleTap", "tap", "singleTap", "longTap"].forEach(function(e) {
			t.fn[e] = function(t) {
				return this.on(e, t)
			}
		})
	}(i)
})